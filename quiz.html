<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>æ•¸å­¸éŠæˆ²é¸å–®</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: sans-serif; background: #f9f9f9; margin: 0; padding: 0; text-align: center; }
    header { background-color: #4a90e2; color: white; padding: 2rem 0; }
    .container { max-width: 800px; margin: 2rem auto; background: white; padding: 2rem; border-radius: 10px; }
    .game-button, .option, .nav-button { display: block; margin: 1rem auto; padding: 1rem; width: 80%; font-size: 1rem; border: 1px solid #4a90e2; border-radius: 8px; background: white; color: #4a90e2; cursor: pointer; }
    .game-button:hover, .nav-button:hover { background: #4a90e2; color: white; }
    .hidden { display: none; }
    .back { margin-top: 2rem; }
    .back a { text-decoration: none; color: #4a90e2; border: 1px solid #4a90e2; padding: 0.5rem 1rem; border-radius: 5px; }
    #memory-game { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 20px; }
  </style>
</head>
<body>

<header>
  <h1>ğŸ® é¸æ“‡ä¸€å€‹éŠæˆ²é–‹å§‹</h1>
</header>

<div id="menu" class="container">
  <button class="game-button" onclick="startGame(1)">éŠæˆ²1ï¼šå°è€ƒéŠæˆ²</button>
  <button class="game-button" onclick="startGame(2)">éŠæˆ²2ï¼šåˆ†æ•¸é…å°å°æ•¸</button>
  <button class="game-button" onclick="startGame(3)">éŠæˆ²3ï¼šè¨˜æ†¶éŠæˆ²</button>
</div>

<!-- éŠæˆ²1 å°è€ƒéŠæˆ² -->
<div id="game1" class="container hidden">
  <h2 id="question-text"></h2>
  <div id="options"></div>
  <div id="quiz-result" class="result"></div>
  <p>å¾—åˆ†ï¼š<span id="score">0</span> / 10</p>
  <button class="nav-button" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ</button>
  <button class="nav-button" onclick="restartQuiz()">é‡æ–°æŒ‘æˆ°</button>
  <button class="nav-button" onclick="goBack()">è¿”å›é¸å–®</button>
</div>

<!-- éŠæˆ²2 é…å°éŠæˆ² -->
<div id="game2" class="container hidden">
  <h2>åˆ†æ•¸é…å°å°æ•¸éŠæˆ²</h2>
  <div id="memory-game"></div>
  <div id="game2-result" style="margin-top: 1rem; font-weight: bold;"></div>
  <button class="nav-button" onclick="goBack()">è¿”å›é¸å–®</button>
</div>

<!-- éŠæˆ²3 è¨˜æ†¶éŠæˆ² -->
<div id="game3" class="container hidden">
  <h2>è¨˜æ†¶éŠæˆ²</h2>
  <div id="memory-numbers" style="font-size: 2rem; margin: 20px;"></div>
  <div id="memory-question" style="margin: 20px;"></div>
  <input type="text" id="memory-answer" placeholder="è«‹è¼¸å…¥ç­”æ¡ˆ" style="padding: 0.5rem; font-size: 1rem;" class="hidden">
  <div id="memory-result" style="margin-top: 1rem; font-weight: bold;"></div>
  <button class="nav-button hidden" id="submit-answer" onclick="submitMemoryAnswer()">æäº¤ç­”æ¡ˆ</button>
  <button class="nav-button hidden" id="restart-memory" onclick="startMemoryChallenge()">å†ä¾†ä¸€æ¬¡</button>
  <button class="nav-button" onclick="goBack()">è¿”å›é¸å–®</button>
</div>

<div class="back">
  <a href="index.html">â† è¿”å›é¦–é </a>
</div>

<script>
function startGame(number) {
  document.getElementById("menu").classList.add("hidden");
  document.querySelectorAll(".container").forEach(div => div.classList.add("hidden"));
  document.getElementById("game" + number).classList.remove("hidden");
  if (number === 1) showQuestion();
  if (number === 2) startMemoryGame();
  if (number === 3) startMemoryChallenge();
}

function goBack() {
  document.querySelectorAll(".container").forEach(div => div.classList.add("hidden"));
  document.getElementById("menu").classList.remove("hidden");
}

// éŠæˆ²1 å°è€ƒ
const questions = [
  { q: "1/2 = ?", options: ["0.25", "0.5", "0.75"], answer: "0.5" },
  { q: "3/4 = ?", options: ["0.75", "0.5", "0.25"], answer: "0.75" },
  { q: "50% = ?", options: ["0.25", "0.5", "0.75"], answer: "0.5" },
  { q: "25% = ?", options: ["0.25", "0.4", "0.75"], answer: "0.25" },
];
let questionList = shuffleArray([...questions]).slice(0, 10);
let currentIndex = 0;
let score = 0;
let hasAnswered = false;

function showQuestion() {
  const q = questionList[currentIndex];
  document.getElementById("question-text").textContent = q.q;
  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";
  document.getElementById("quiz-result").textContent = "";
  hasAnswered = false;

  shuffleArray(q.options).forEach(opt => {
    const btn = document.createElement("button");
    btn.className = "option";
    btn.textContent = opt;
    btn.onclick = () => checkAnswer(btn, opt, q.answer);
    optionsDiv.appendChild(btn);
  });
}

function checkAnswer(button, choice, correct) {
  if (hasAnswered) return;
  hasAnswered = true;
  const result = document.getElementById("quiz-result");
  const allOptions = document.querySelectorAll(".option");
  allOptions.forEach(btn => btn.disabled = true);

  if (choice === correct) {
    score++;
    document.getElementById("score").textContent = score;
    result.textContent = "âœ… ç­”å°äº†ï¼";
    result.style.color = "green";
    button.style.backgroundColor = "#c8f7c5";
  } else {
    result.textContent = "âŒ éŒ¯äº†ï¼Œæ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š" + correct;
    result.style.color = "red";
    button.style.backgroundColor = "#f7c5c5";
  }
}

function nextQuestion() {
  if (!hasAnswered) return alert("è«‹å…ˆä½œç­”ï¼");
  currentIndex++;
  if (currentIndex < questionList.length) {
    showQuestion();
  } else {
    alert("ğŸ‰ å°è€ƒçµæŸï¼ä½ çš„å¾—åˆ†æ˜¯ï¼š" + score + "/10");
    restartQuiz();
  }
}

function restartQuiz() {
  questionList = shuffleArray([...questions]).slice(0, 10);
  currentIndex = 0;
  score = 0;
  document.getElementById("score").textContent = score;
  showQuestion();
}

// éŠæˆ²2 é…å°
const pairs = [
  { fraction: "1/2", decimal: "0.5" },
  { fraction: "1/4", decimal: "0.25" },
  { fraction: "3/4", decimal: "0.75" },
  { fraction: "2/5", decimal: "0.4" },
  { fraction: "4/5", decimal: "0.8" }
];
let memoryCards = [];
let firstCard = null;
let secondCard = null;
let matches = 0;

function startMemoryGame() {
  const gameArea = document.getElementById("memory-game");
  document.getElementById("game2-result").textContent = "";
  gameArea.innerHTML = "";
  matches = 0;
  firstCard = null;
  secondCard = null;

  memoryCards = [];
  pairs.forEach(pair => {
    memoryCards.push({ text: pair.fraction, pair: pair.decimal });
    memoryCards.push({ text: pair.decimal, pair: pair.fraction });
  });
  memoryCards = memoryCards.sort(() => Math.random() - 0.5);

  memoryCards.forEach((card, index) => {
    const cardButton = document.createElement("button");
    cardButton.textContent = "â“";
    cardButton.className = "option";
    cardButton.dataset.text = card.text;
    cardButton.dataset.pair = card.pair;
    cardButton.dataset.index = index;
    cardButton.onclick = () => flipCard(cardButton);
    gameArea.appendChild(cardButton);
  });
}

function flipCard(cardButton) {
  if (cardButton.disabled || cardButton === firstCard) return;
  cardButton.textContent = cardButton.dataset.text;

  if (!firstCard) {
    firstCard = cardButton;
  } else {
    secondCard = cardButton;

    if (firstCard.dataset.text === secondCard.dataset.pair) {
      setTimeout(() => {
        firstCard.style.visibility = "hidden";
        secondCard.style.visibility = "hidden";
        firstCard = null;
        secondCard = null;
        matches++;
        if (matches === pairs.length) {
          document.getElementById("game2-result").textContent = "ğŸ‰ é…å°æˆåŠŸï¼å…¨éƒ¨å®Œæˆï¼";
        }
      }, 500);
    } else {
      setTimeout(() => {
        firstCard.textContent = "â“";
        secondCard.textContent = "â“";
        firstCard = null;
        secondCard = null;
      }, 800);
    }
  }
}

// éŠæˆ²3 è¨˜æ†¶éŠæˆ²
let memoryNumbers = [];
let questionIndex = 0;
let memoryScore = 0;

function startMemoryChallenge() {
  document.getElementById("memory-result").textContent = "";
  document.getElementById("memory-answer").classList.add("hidden");
  document.getElementById("submit-answer").classList.add("hidden");
  document.getElementById("restart-memory").classList.add("hidden");
  document.getElementById("memory-question").textContent = "";

  memoryNumbers = Array.from({ length: 5 }, () => Math.floor(Math.random() * 10));
  document.getElementById("memory-numbers").textContent = memoryNumbers.join("  ");

  setTimeout(() => {
    document.getElementById("memory-numbers").textContent = "";
    askMemoryQuestion();
  }, 3000);
}

function askMemoryQuestion() {
  memoryScore = 0;
  questionIndex = Math.floor(Math.random() * memoryNumbers.length);
  document.getElementById("memory-question").textContent = `è«‹è¼¸å…¥å‰›å‰›çœ‹åˆ°çš„ç¬¬ ${questionIndex + 1} å€‹æ•¸å­—æ˜¯ï¼Ÿ`;
  document.getElementById("memory-answer").value = "";
  document.getElementById("memory-answer").classList.remove("hidden");
  document.getElementById("submit-answer").classList.remove("hidden");
}

function submitMemoryAnswer() {
  const userAnswer = document.getElementById("memory-answer").value;
  if (userAnswer == memoryNumbers[questionIndex]) {
    document.getElementById("memory-result").textContent = "âœ… ç­”å°äº†ï¼å¤ªæ£’äº†ï¼";
    document.getElementById("memory-result").style.color = "green";
  } else {
    document.getElementById("memory-result").textContent = `âŒ éŒ¯äº†ï¼Œæ­£ç¢ºç­”æ¡ˆæ˜¯ ${memoryNumbers[questionIndex]}ã€‚`;
    document.getElementById("memory-result").style.color = "red";
  }
  document.getElementById("submit-answer").classList.add("hidden");
  document.getElementById("restart-memory").classList.remove("hidden");
}

function shuffleArray(array) {
  return array.sort(() => Math.random() - 0.5);
}
</script>

</body>
</html>
